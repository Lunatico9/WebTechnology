{include file="header.html" title="Header"}

	<!-- breadcrumb -->
	<div class="bread-crumb bgwhite flex-w p-l-52 p-r-15 p-t-30 p-l-15-sm">
		<a href="index.php" class="s-text16">
			Home
			<i class="fa fa-angle-right m-l-8 m-r-9" aria-hidden="true"></i>
		</a>

		<a href="shop.php?catalogue={$catalogo}" class="s-text16">
			{$catalogo}
			<i class="fa fa-angle-right m-l-8 m-r-9" aria-hidden="true"></i>
		</a>

		<a href="shop.php?category={$categoria}" class="s-text16">
			{$categoria}
			<i class="fa fa-angle-right m-l-8 m-r-9" aria-hidden="true"></i>
		</a>

		<span class="s-text17">
			{$nome} Detail
		</span>
	</div>

	<!-- Product Detail -->
	<div class="container bgwhite p-t-35 p-b-80">
		<div class="flex-w flex-sb">
			<div class="w-size13 p-t-30 respon5">
				<div class="wrap-slick3 flex-sb flex-w">
					<div class="wrap-slick3-dots"></div>
						<div class="slick3">
							<div class="item-slick3" data-thumb="{$img1}">
								<div class="wrap-pic-w">
									<img src="{$img1}" alt="IMG-PRODUCT">
								</div>
							</div>
	
							{if $isset2 == 1}
								<div class="item-slick3" data-thumb="{$img2}">
									<div class="wrap-pic-w">
										<img src="{$img2}" alt="IMG-PRODUCT">
									</div>
								</div>
							{/if}
	
							{if $isset3 == 1}
								<div class="item-slick3" data-thumb="{$img3}">
									<div class="wrap-pic-w">
										<img src="{$img3}" alt="IMG-PRODUCT">
									</div>
								</div>
							{/if}
						</div>
					</div>
				</div>

				<div class="w-size14 p-t-30 respon5">
					<h4 class="product-detail-name m-text16 p-b-13">
						{$prodotto}
					</h4>
				
					{if isset($prezzos)}
						<span class="block2-oldprice m-text7 p-r-5">
							€ {$prezzo}
						</span>

						<span class="block2-newprice m-text8 p-r-5">
							€ {$prezzos}
						</span>
					{else}
						<span class="block2-price m-text6 p-r-5">
							€ {$prezzo}
						</span>
					{/if}
				
					<!-- Size -->
					<div class="p-t-33 p-b-60">
						<div class="flex-m flex-w p-b-10">
							<div class="s-text15 w-size15 t-center">
								Size
							</div>

							<div class="rs2-select2 rs3-select2 bo4 of-hidden w-size16">
								<select class="selection-2" name="size" id="size">
									{foreach item=size from=$sizes}
										<option>{$size[0]}</option>
									{/foreach}
								</select>
							</div>
						</div>

                    <!-- Color -->
					<div class="flex-m flex-w">
						<div class="s-text15 w-size15 t-center">
							Color
						</div>

						<div class="rs2-select2 rs3-select2 bo4 of-hidden w-size16">
							<select class="selection-2" name="color" id="color">
								{foreach item=color from=$colors}
									<option>{$color[0]}</option>
								{/foreach}
							</select>
						</div>
					</div>

					<div class="flex-r-m flex-w p-t-10">
						<div class="w-size16 flex-m flex-w">
							<div class="flex-w bo5 of-hidden m-r-22 m-t-10 m-b-10">
								<button class="btn-num-product-down color1 flex-c-m size7 bg8 eff2">
									<i class="fs-12 fa fa-minus" aria-hidden="true"></i>
								</button>

								<input class="size8 m-text18 t-center num-product" type="number" name="num-product" value="1">

								<button class="btn-num-product-up color1 flex-c-m size7 bg8 eff2">
									<i class="fs-12 fa fa-plus" aria-hidden="true"></i>
								</button>
							</div>

							<div class="flex-w of-hidden m-r-22 m-t-10 m-b-10 {$stock}">
								{$availability}
							</div>

							<div class="btn-addcart-product-detail size9 trans-0-4 m-t-10 m-b-10">
								<!-- Button --> 
								<!-- AJAX here --> 
								<button onclick="addProduct()" class="flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4">
									Add to Cart
								</button>
							</div>
						</div>
					</div>
				</div>

                <!-- Categories -->
				<div class="p-b-45">
					<span class="s-text8">Categories: {$categoria}, {$catalogo}.</span>
				</div>

				<!-- Descriptions -->
				<div class="wrap-dropdown-content bo6 p-t-15 p-b-14 active-dropdown-content">
					<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text19 color0-hov trans-0-4">
						Description
						<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
						<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
					</h5>

					<div class="dropdown-content dis-none p-t-15 p-b-23">
						<p class="s-text8">
							{$desc1}
						</p>
					</div>
				</div>

				<div class="wrap-dropdown-content bo7 p-t-15 p-b-14">
					<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text19 color0-hov trans-0-4">
						Additional information
						<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
						<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
					</h5>

					<div class="dropdown-content dis-none p-t-15 p-b-23">
						<p class="s-text8">
							{$desc2}
						</p>
					</div>
				</div>

				<br>

				{if $admin == 1}
					<form method="POST" action="product-detail.php?product={$prodotto}">
						<h5 class="m-text26 p-b-36 p-t-15">
							Add discount price
						</h5>

						<p>Discounted price</p>
						<div class="bo4 of-hidden size15 m-b-20">
							<input class="sizefull s-text7 p-l-22 p-r-22" type="number" step="0.01" min="0" name="discount" placeholder="{$prezzo}" required>
						</div>

						<p>Start date</p>
						<div class="bo4 of-hidden size15 m-b-20">
							<input class="sizefull s-text7 p-l-22 p-r-22" type="date" name="start" required>
						</div>

						<p>End date</p>
						<div class="bo4 of-hidden size15 m-b-20">
							<input class="sizefull s-text7 p-l-22 p-r-22" type="date" name="end" required>
						</div>
		
						<div class="w-size25">
							<!-- Button -->
							<button class="flex-c-m size2 bg1 bo-rad-23 hov1 m-text3 trans-0-4">
								Submit
							</button>
						</div>
					</form>
					<br>
				{/if}
			</div>
		</div>
	</div>


	<!-- Related Product -->
	<section class="relateproduct bgwhite p-t-45 p-b-138">
		<div class="container">
			<div class="sec-title p-b-60">
				<h3 class="m-text5 t-center">
					Related Products
				</h3>
			</div>

			<!-- Slide2 -->
			<div class="wrap-slick2">
				<div class="slick2">
					
					{foreach item=product from=$relprod}
						<div class="item-slick2 p-l-15 p-r-15">
							<!-- Block2 -->
							<div class="block2">
								<div class="block2-img wrap-pic-w of-hidden pos-relative">
									<img src="{$product[2]}" alt="IMG-PRODUCT">

									<div class="block2-overlay trans-0-4">
										<div class="block2-btn-addcart w-size1 trans-0-4">
											<!-- Button -->
                                	        <a href="product-detail.php?product={$product[0]}">
											  	<button class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">
													Buy Now
										  	</button>
                                        	</a>
										</div>
									</div>
								</div>

								<div class="block2-txt p-t-20">
									<a href="product-detail.php?product={$product[0]}" class="block2-name dis-block s-text3 p-b-5">
										{$product[0]}
									</a>

									{if isset($product[3])}
										<span class="block2-oldprice m-text7 p-r-5">
											€ {$product[1]}
										</span>
										<span class="block2-newprice m-text8 p-r-5">
											€ {$product[3]}
										</span>
									{else}
										<span class="block2-price m-text6 p-r-5">
											€ {$product[1]}
										</span>
									{/if}
								</div>
							</div>
						</div>
					{/foreach}
				</div>
			</div>
		</div>
	</section>


{include file="footer.html" title="Footer"}

	<!-- Back to top -->
	<div class="btn-back-to-top bg0-hov" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="fa fa-angle-double-up" aria-hidden="true"></i>
		</span>
	</div>

	<!-- Container Selection -->
	<div id="dropDownSelect1"></div>
	<div id="dropDownSelect2"></div>

<!--===============================================================================================-->
<!-- Adds the product shown in the page, in the chosen quantity, size and color to the user's cart -->
<script type="text/javascript">
    function addProduct(){
        //retrieve product info
        var name = sanitizeString($(".product-detail-name").text());
        var quantity = $(".num-product").val();
        var color = sanitizeString($("#color").val());
        var size = sanitizeString($("#size").val());
        //AJAX request
        $.post("addToCart.php", {
            product: name,
            quantity: quantity,
            color: color,
            size: size
        }, function (data){
            var olditem = data.slice(data.search(["0"|"1"]));
            var over = data.slice(0,4);
            //error message if requested number over stock number
            if (over == "over"){
                swal("We don't have that many in stock!", "Try a lower amount please", "error");
            } else {
                //if adding an item not previously in cart increase icon number by 1
                if(olditem == 0){
                    var number = parseInt($("#item-number").text())+1;
                    $(".header-icons-noti").text(number);
                }
                //confirmation message
                swal(name, "is added to cart !", "success");
            }
        })
    }

</script>

<!--===============================================================================================-->
<!-- String Sanitize Function -->
<script type="text/javascript">
    function sanitizeString(str){
        str = str.replace(/[^a-z0-9áéíóúñü \.,_-]/gim,"");
        return str.trim();
    }
</script>
<!--===============================================================================================-->
	<script type="text/javascript" src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="vendor/bootstrap/js/popper.js"></script>
	<script type="text/javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="vendor/select2/select2.min.js"></script>
	<script type="text/javascript">
		$(".selection-1").select2({
			minimumResultsForSearch: 20,
			dropdownParent: $('#dropDownSelect1')
		});

		$(".selection-2").select2({
			minimumResultsForSearch: 20,
			dropdownParent: $('#dropDownSelect2')
		});
	</script>
<!--===============================================================================================-->
	<script type="text/javascript" src="vendor/slick/slick.min.js"></script>
	<script type="text/javascript" src="js/slick-custom.js"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="vendor/sweetalert/sweetalert.min.js"></script>

<!--===============================================================================================-->
	<script src="js/main.js"></script>

</body>
</html>
